<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŸ¥çŸ¥é»æ•¸</title>
    <link rel="icon" type="image/png" href="./icon.png">
    <link rel="apple-touch-icon" href="./icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Varela+Round&family=Zen+Maru+Gothic:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="style.css">

    <style>
        /* è®“ç¸½è³‡ç”¢è·Ÿé ç®—ä¸¦æ’é¡¯ç¤ºçš„ Grid */
        .summary-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        /* æ‰‹æ©Ÿç‰ˆé©é…ï¼šè¢å¹•å¤ªå°æ™‚è®Šå›ä¸Šä¸‹æ’ */
        @media (max-width: 400px) {
            .summary-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ç¸½è³‡ç”¢å¡ç‰‡æ¨£å¼ (ç¹¼æ‰¿ budget-main-display ä½†å»é™¤éƒ¨åˆ†å±¬æ€§) */
        .info-card {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 20px;
            padding: 16px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
            border: 1px solid #e0e7df;
            height: 100%;
            /* ç¢ºä¿é«˜åº¦ä¸€è‡´ */
        }

        /* åˆ—è¡¨æ¨™é ­å®¹å™¨ */
        .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        /* é¡åˆ¥ç¯©é¸é¸å–®æ¨£å¼ */
        .filter-select {
            appearance: none;
            -webkit-appearance: none;
            background-color: #f1f8e9;
            border: 1px solid #c5e1a5;
            color: #558b2f;
            padding: 6px 12px;
            border-radius: 20px;
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            outline: none;
            text-align: center;
            /* è‡ªè¨‚ä¸‹æ‹‰ç®­é ­ */
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23558b2f%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 10px;
            padding-right: 25px;
        }

        .filter-select:hover {
            background-color: #dcedc8;
        }
    </style>
</head>

<body>
    <div class="app">

        <section id="landing-section" class="section landing-container">
            <div class="landing-card">
                <div class="app-logo">ğŸ’°</div>
                <h1>æ£®æ£®é¢¨æ ¼<br>é»æ•¸åŠ©æ‰‹</h1>
                <p class="subtitle">çŸ¥ğŸ‹çŸ¥ğŸŒˆçš„é»æ•¸ç´€éŒ„ï¼Œ<br>åªæœ‰å®¶åº­ç”Ÿæ´»ä¸Šçš„å¿«æ¨‚èˆ‡å¤¢æƒ³ï¼</p>
                <button id="go-login-btn" class="btn btn-primary btn-lg">é–‹å•Ÿå°é‡‘åº«</button>
            </div>
        </section>

        <section id="login-section" class="section hidden">
            <div class="login-card">
                <button id="back-to-landing" class="btn-icon back-btn">â†</button>
                <div class="app-logo small">ğŸ’°</div>
                <h2>é»æ•¸ç™»å…¥</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label for="username">ä½¿ç”¨è€…åç¨±</label>
                        <input type="text" id="username" name="username" required autocomplete="username"
                            placeholder="è«‹è¼¸å…¥å¸³è™Ÿ">
                    </div>
                    <div class="form-group">
                        <label for="password">é€šé—œå¯†ç¢¼</label>
                        <input type="password" id="password" name="password" required autocomplete="current-password"
                            placeholder="è«‹è¼¸å…¥å¯†ç¢¼">
                    </div>
                    <button type="submit" class="btn btn-primary">è§£é–é»æ•¸é‡‘åº«</button>
                    <p id="login-error" class="error-msg"></p>
                </form>
            </div>
        </section>

        <section id="main-section" class="section hidden">
            <header class="header">
                <div class="brand">
                    <span class="app-logo small">ğŸ’°</span>
                    <span id="welcome-msg">æ­¡è¿å›ä¾†ï¼</span>
                </div>
                <button id="logout-btn" class="btn btn-sm btn-secondary">ç™»å‡º</button>
            </header>

            <div class="bells-card">
                <!-- <div class="summary-grid"> -->

                <!-- <div class="budget-main-display info-card">
                        <span class="label-lg">ç›®å‰ç¸½è³‡ç”¢</span>
                        <div class="amount-hero" id="total-balance" style="color: #558b2f;">0</div>
                        <div class="budget-meta">
                            <span style="font-size: 0.85em; opacity: 0.7;">å£è¢‹è£¡çš„é»æ•¸</span>
                        </div>
                    </div> -->

                <div class="budget-main-display" id="budget-section">
                    <span class="label-lg">æœ¬æœˆé»æ•¸ç›®æ¨™</span>
                    <div class="amount-hero" id="budget-remaining">0</div>

                    <div class="progress-bar-bg">
                        <div id="budget-progress-bar" class="progress-bar-fill" style="width: 0%"></div>
                    </div>
                    <div class="budget-meta">
                        <span>ç›®æ¨™é»æ•¸: <span id="total-budget">0</span></span>
                        <span id="budget-percent">0%</span>
                    </div>
                </div>
                <!-- </div> -->

                <div class="bell-stats">
                    <div class="stat-item expense">
                        <span class="label">ç¸½é»æ•¸</span>
                        <span id="total-balance" class="amount">0</span>
                    </div>
                    <div class="stat-item income">
                        <span class="label">æœ¬æœˆåŠ é»æ•¸</span>
                        <span id="total-income" class="amount">0</span>
                    </div>
                    <div class="stat-item expense">
                        <span class="label">æœ¬æœˆæ‰£é»æ•¸</span>
                        <span id="total-expense" class="amount">0</span>
                    </div>
                </div>
            </div>

            <div class="action-grid">
                <button id="btn-add-transaction" class="action-card income">
                    <span class="icon">âœï¸</span>
                    <span>è¨˜ä¸€ç­†</span>
                </button>
                <button id="btn-manage-category" class="action-card expense">
                    <span class="icon">ğŸ—‚ï¸</span>
                    <span>ç®¡ç†æˆå“¡</span>
                </button>
            </div>

            <div class="list-container">
                <div class="list-header">
                    <h3 id="transaction-list-title" style="margin: 0;">æ‰€æœ‰ç´€éŒ„</h3>

                    <select id="category-filter" class="filter-select">
                        <option value="all">é¡¯ç¤ºå…¨éƒ¨</option>
                    </select>
                </div>

                <div id="transaction-list" class="transaction-list">
                </div>
            </div>
        </section>

    </div>

    <template id="tpl-transaction-form">
        <form id="swal-txn-form" class="swal-form">
            <div class="form-group">
                <label>æ—¥æœŸ</label>
                <input type="date" id="swal-date" class="swal2-input" required>
            </div>
            <div class="form-group">
                <label>åŠ æ‰£é»</label>
                <select id="swal-type" class="swal2-select">
                    <option value="income">åŠ é»</option>
                    <option value="expense">æ‰£é»</option>
                </select>
            </div>
            <div class="form-group">
                <label>é¡åˆ¥</label>
                <select id="swal-category" class="swal2-select">
                </select>
            </div>
            <div class="form-group">
                <label>é‡‘é¡</label>
                <input type="number" id="swal-amount" class="swal2-input" placeholder="å¤šå°‘é»ï¼Ÿ" min="1" required>
            </div>
            <div class="form-group">
                <label>å‚™è¨»</label>
                <input type="text" id="swal-note" class="swal2-input" placeholder="ä¾‹å¦‚ï¼šè²·å¡ç‰‡ã€èšé¤">
            </div>
        </form>
    </template>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>

</html>